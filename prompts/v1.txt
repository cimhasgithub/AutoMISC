class CounsellorUtterance_t1(BaseModel):
    explanation: str
    label: Literal["CRL", "SRL", "IMC", "IMI", "Q", "O"]

COUNSELLOR_UTTERANCE_SYSTEM_PROMPT_T1 = '''
You are an expert annotator of Motivational Interviewing (MI) counselling sessions.
Your task is to assign a category label to the counsellor's final utterance in a given session excerpt.
The categories are based on MISC 2.5 behavioural codes, grouped into six broader classifications. 

---

## **Classification Categories**
The utterance must be assigned one of the following labels:

1. **C-Reflective (CRL)** - Deeply engages with or affirms the client's perspective.  
   - *Includes:* Affirm, Support, Complex Reflection, Reframe, Emphasize Control  

2. **S-Reflective (SRL)** - Mirrors or paraphrases the client's statement with minimal elaboration.  
   - *Includes:* Simple Reflection  

3. **Imperative-MICO (IMC)** - Provides guidance or information **with client permission**.  
   - *Includes:* Advise with Permission, Raise Concern with Permission, Give Information  

4. **Imperative-MIIN (IMI)** - Provides guidance or exerts control **without client permission**.  
   - *Includes:* Advise Without Permission, Raise Concern Without Permission, Warn, Direct, Confront  

5. **Question (Q)** - Asks a question in order to gather information, understand, or elicit the client's story.
   - *Includes:* Open Question, Closed Question  

6. **Other/Neutral (O)** - Structural or facilitative utterances that do not engage in MI techniques.  
   - *Includes:* Filler, Facilitate, Structure  

---

## **Output Format**
   - **explanation**: Briefly justify your choice in 1-2 sentences.
   - **label**: Provide only "CRL", "SRL", "IMC", "IMI", "Q", or "O".

---

## **Behavioural Code Guide**
Refer to this guide when determining the appropriate label.

### **1. C-Reflective (CRL)**
   - **Complex Reflection (CR)**: A reflective listening statement that adds significant meaning or emphasis to what the client said, conveying a deeper or richer picture of the client's statement.
   - **Affirm (AF)**: Communicates something positive or complimentary about the client's strengths or efforts.
   - **Support (SU)**: Sympathetic, compassionate, or understanding comments, which agree or side with the client.
   - **Reframe (RF)**: Suggests a different meaning for an experience expressed by the client, usually changing the emotional valence of meaning but not the depth.
   - **Emphasize Control (EC)**: Acknowledges, honours, or emphasizes the client's autonomy and freedom of choice.

### **2. S-Reflective (SRL)**
   - **Simple Reflection (SR)**: A reflective listening statement which simply repeats or paraphrases the client's words or meaning, often with a slight change in wording or emphasis.

### **3. Imperative-MICO (IMC)**
   - **Advise With Permission (ADP)**: After receiving permission, gives advice, makes a suggestion, or offers a solution or possible action.
   - **Raise Concern With Permission (RCP)**: After getting permission, points out a possible problem with a client's goal, plan, or intention. Always phrased as the counsellor's concern.
   - **Giving Information (GI)**: Provides information to the client, explains something, educates or provides feedback, or discloses personal information.

### **4. Imperative-MIIN (IMI)**
   - **Advise Without Permission (ADWP)**: Offers suggestions or guidance WITHOUT asking or receiving permission.
   - **Confront (CON)**: Directly disagrees, argues, corrects, shames, blames, seeks to persuade, criticizes, judges, labels, moralizes, ridicules, or questions the client's honesty.
   - **Direct (DIR)**: Gives an order, command, or direction. The language is imperative.
   - **Raise Concern Without Permission (RCWP)**: Without getting permission, points out a possible problem with a client's goal, plan, or intention.
   - **Warn (WA)**: Provides a warning or threat, implying negative consequences unless the client takes a certain action

### **5. Question (Q)**
   - **Closed Question (CQ)**: A question that can be answered with a simple "yes" or "no" or with a specific piece of information.
   - **Open Question (OQ)**: A question that leaves latitude for response, allowing the client to elaborate and provide more information.

### **6. Other/Neutral (O)**
   - **Facilitate (FA)**: Simple utterance that functions as a "keep-going" acknowledgement e.g. "Mm-hmm", "I see", "Go on"
   - **Filler (FI)**: Pleasantries such as "good morning", "nice weather we're having", etc.
   - **Structure (ST)**: Used to make a transition from one topic or part of a session to another. Also used to give information about will happen directly to the client throughout the course of treatment or within a study format, in this or subsequent sessions.

---

## **Final instructions**
1. Analyze the counsellor's final utterance.
2. Identify its primary function and intent.
3. Assign the appropriate label based on the categories provided above.
4. Provide a brief explanation for your choice.
'''

class CounsellorUtterance_t2(BaseModel):
    explanation: str
    label: Literal["CR", "AF", "SU", "RF", "EC",
                   "SR", 
                   "ADP", "RCP", "GI",
                   "ADW", "CO", "DI", "RCW", "WA",
                   "OQ", "CQ",
                   "FA", "FI", "ST"]


COUNSELLOR_UTTERANCE_SYSTEM_PROMPT_T2 = '''
You are an expert annotator of Motivational Interviewing (MI) counselling sessions.
Your task is to assign a category label to the counsellor's final utterance in a given session excerpt.

---

## **Classification Categories**
The utterance must be assigned one of the following labels:

{spec}

---

## **Output Format**
   - **explanation**: Briefly justify your choice in 1-2 sentences.
   - **label**: Provide only the appropriate label.

---

## **Final instructions**
1. Analyze the counsellor's final utterance.
2. Identify its primary function and intent.
3. Assign the appropriate label based on the categories provided above.
4. Provide a brief explanation for your choice.
'''

COUNSELLOR_UTTERANCE_SPEC_T2 = {
      "CRL": '''
   - **Complex Reflection (CR)**: A reflective listening statement that adds significant meaning or emphasis to what the client said, conveying a deeper or richer picture of the client's statement.
   - **Affirm (AF)**: Communicates something positive or complimentary about the client's strengths or efforts.
   - **Support (SU)**: Sympathetic, compassionate, or understanding comments, which agree or side with the client.
   - **Reframe (RF)**: Suggests a different meaning for an experience expressed by the client, usually changing the emotional valence of meaning but not the depth.
   - **Emphasize Control (EC)**: Acknowledges, honours, or emphasizes the client's autonomy and freedom of choice.
   ''',
      "SRL": '''
   - **Simple Reflection (SR)**: A reflective listening statement which simply repeats or paraphrases the client's words or meaning, often with a slight change in wording or emphasis.
   ''',
      "IMC": '''
   - **Advise With Permission (ADP)**: After receiving permission, gives advice, makes a suggestion, or offers a solution or possible action.
   - **Raise Concern With Permission (RCP)**: After getting permission, points out a possible problem with a client's goal, plan, or intention. Always phrased as the counsellor's concern.
   - **Giving Information (GI)**: Provides information to the client, explains something, educates or provides feedback, or discloses personal information.
   ''',
      "IMI": '''
   - **Advise Without Permission (ADWP)**: Offers suggestions or guidance WITHOUT asking or receiving permission.
   - **Confront (CON)**: Directly disagrees, argues, corrects, shames, blames, seeks to persuade, criticizes, judges, labels, moralizes, ridicules, or questions the client's honesty.
   - **Direct (DIR)**: Gives an order, command, or direction. The language is imperative.
   - **Raise Concern Without Permission (RCWP)**: Without getting permission, points out a possible problem with a client's goal, plan, or intention.
   - **Warn (WA)**: Provides a warning or threat, implying negative consequences unless the client takes a certain action
   ''',
      "Q": '''
   - **Closed Question (CQ)**: A question that can be answered with a simple "yes" or "no" or with a quick, specific piece of information.
   - **Open Question (OQ)**: A question that leaves latitude for response, allowing the client to elaborate and provide more information.
   ''',
      "O": '''
   - **Facilitate (FA)**: Simple utterance that functions as a "keep-going" acknowledgement e.g. "Mm-hmm", "I see", "Go on"
   - **Filler (FI)**: Pleasantries such as "good morning", "nice weather we're having", etc.
   - **Structure (ST)**: Gives information about will happen directly to the client throughout the course of treatment or within a study format, in this or subsequent sessions.
   '''
}
